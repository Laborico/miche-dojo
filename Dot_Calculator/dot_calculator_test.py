from dot_calculator import calculator as calc
from random import randrange, choice

def test_simple_ops():
    assert calc("..... + ...............") == "...................."
    assert calc("..... - ...") == ".."
    assert calc("..... - .") == "...."
    assert calc("..... * ...") == "..............."
    assert calc("..... * ..") == ".........."
    assert calc("..... // ..") == ".."
    assert calc("..... // .") == "....."
    assert calc(". // ..") ==  ""
    assert calc(". - .") ==  ""
    
def test_rests():
    assert calc("......................................................................................... - .............................................") == "............................................"
    assert calc("...................................................... - ................................") == "......................"
    assert calc(".................................................................. - ................................................") == ".................."
    assert calc("..................................................................................... - ...............................") == "......................................................"
    assert calc("..................................................... - ...............................................") == "......"
    assert calc("............................................................ - ..................") == ".........................................."
    assert calc(".......................................................... - ..................................") == "........................"
    assert calc("................................................... - .............................") == "......................"
    assert calc("................................................................................................ - .....................................") == "..........................................................."
    assert calc("........................................................... - .............................................") == ".............."
    assert calc("................................................................................................. - ...........................") == "......................................................................"
    assert calc("............................................................ - ...") == "........................................................."
    assert calc("........................................................................ - ..................................................") == "......................"
    assert calc("............................................................. - ..............................") == "..............................."
    assert calc(".......................................................................................... - ...") == "......................................................................................."

def test_sums():
    assert calc("........................................................................................ + ..........") == ".................................................................................................."
    assert calc("...................................................... + ..........................")  == "................................................................................"
    assert calc("................................................................................ + ..............................................") == ".............................................................................................................................."
    assert calc("............................................................................... + ...........") == ".........................................................................................."
    assert calc("............................................................................................... + ........") == "......................................................................................................."
    assert calc("................................................................................. + .................................................") == ".................................................................................................................................."
    assert calc("............................................................ + .......") == "..................................................................."
    assert calc("............................................................................................... + ........................") == "......................................................................................................................."
    assert calc("............................................................................................ + ...................................") == "..............................................................................................................................."
    assert calc("........................................................................................ + .............................................") == "....................................................................................................................................."
    assert calc(".......................................................... + ....................") == ".............................................................................."
    assert calc("......................................................................................... + .....") == ".............................................................................................."
    assert calc("................................................................ + ......................................") == "......................................................................................................"
    assert calc(".................................................................. + ........") == ".........................................................................."
    assert calc("................................................... + ..........................") == "............................................................................."

def test_divisions():
    assert calc("............................................................ // ..............................") == ".."
    assert calc(".................................................................................................. // .......................") == "...."
    assert calc("..................................................................... // ........................................") == "."
    assert calc(".................................................................................................. // .....") == "..................."
    assert calc("............................................................................. // .............") == "....."
    assert calc(".............................................................................................. // ................................................") == "."
    assert calc(".............................................................................. // ....................................") == ".."
    assert calc(".................................................................... // .....................") == "..."
    assert calc("......................................................................... // .....") == ".............."
    assert calc(".............................................................................. // ...") == ".........................."
    assert calc(".................................................... // ...............") == "..."
    assert calc("........................................................... // .........................") == ".."
    assert calc(".............................................................................................. // ........") == "..........."
    assert calc("................................................... // ........") == "......"
    assert calc(".................................................................................................... // ......................................") == ".."
    
def test_multiplications():
    assert calc(".......................................................................................... * .") == ".........................................................................................."
    assert calc("... * ...........................................") == "................................................................................................................................."
    assert calc("........ * ") == ""
    assert calc(". * ..........") == ".........."
    assert calc("..... * .....") == "........................."
    assert calc("....................... * ..") == ".............................................."
    assert calc(".......... * ..") == "...................."
    assert calc("...... * ............") == "........................................................................"
    assert calc(" * ") == ""
    assert calc("..................... * ......") == ".............................................................................................................................."
    assert calc(".......... * ....") == "........................................"
    assert calc("...... * ....") == "........................"
    assert calc("...... * ........") == "................................................"
    assert calc("................................................................ * ..") == "................................................................................................................................"
    assert calc(". * .") == "."
    
def test_random():
    ops = [" - ", " + ", " // ", " * "]
    for i in range(100):
        first = randrange(1,1001)
        second = randrange(1,1001)
        operation = choice(ops)
        result = eval(str(first) + operation + str(second))
        assert calc( "." * first + operation + "." * second) == "." * result